# robot_trader.py
import time
import random
from datetime import datetime

TRADING_SYMBOL = "BTC-USD"
BALANCE = 1000
POSITION = 0
trade_log = []

def log_trade(action, price, amount):
    timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    trade = {"time": timestamp, "action": action, "price": price, "amount": amount}
    trade_log.append(trade)
    print(trade)

def get_market_price():
    return round(random.uniform(30000, 35000), 2)

def decide_trade(price):
    if price < 31000:
        return "BUY"
    elif price > 34000:
        return "SELL"
    else:
        return "HOLD"

def main():
    global BALANCE, POSITION
    print("Paper Trading Bot Started...")

    price = get_market_price()
    action = decide_trade(price)
    amount = 0

    if action == "BUY":
        amount = BALANCE / price
        POSITION += amount
        BALANCE -= amount * price
        log_trade("BUY", price, round(amount, 4))
    elif action == "SELL" and POSITION > 0:
        amount = POSITION
        BALANCE += amount * price
        POSITION = 0
        log_trade("SELL", price, round(amount, 4))
    else:
        print(f"{datetime.now()} - No action. Price: {price}, Position: {POSITION}")

    print(f"Balance: ${round(BALANCE,2)}, Position: {round(POSITION,4)} coins")
    print("Run complete.\n")

if __name__ == "__main__":
    main()